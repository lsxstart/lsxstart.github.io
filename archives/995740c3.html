<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="论文阅读_ CDIP-ChatGLM3：集成计算机视觉和语言建模的双模型方法，用于作物病害识别和处方, java 前后端">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>论文阅读_ CDIP-ChatGLM3：集成计算机视觉和语言建模的双模型方法，用于作物病害识别和处方 | lsxstart/lsxstart</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 6.1.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="lsxstart/lsxstart" type="application/atom+xml">
</head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">lsxstart/lsxstart</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">lsxstart/lsxstart</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/20.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">论文阅读_ CDIP-ChatGLM3：集成计算机视觉和语言建模的双模型方法，用于作物病害识别和处方</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E8%AE%BA%E6%96%87/">
                                <span class="chip bg-color">论文</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/" class="post-category">
                                论文阅读
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2025-05-08
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2025-05-15
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    13.3k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    47 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h3 id="CDIP-ChatGLM3：-集成计算机视觉和语言建模的双模型方法，用于作物病害识别和处方"><a href="#CDIP-ChatGLM3：-集成计算机视觉和语言建模的双模型方法，用于作物病害识别和处方" class="headerlink" title="CDIP-ChatGLM3： 集成计算机视觉和语言建模的双模型方法，用于作物病害识别和处方"></a>CDIP-ChatGLM3： 集成计算机视觉和语言建模的双模型方法，用于作物病害识别和处方</h3><h3 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h3><p>深度学习（DL）模型在植物病害识别方面表现出了极高的准确性，但由于缺乏专业和可操作的指导，它们对农民的实际效用仍然有限。</p>
<p><strong>为了弥补这一差距，我们开发了 CDIP-ChatGLM3，这是一个创新的框架，它将最先进的基于 DL 的计算机视觉模型与经过微调的大语言模型 (LLM) 相结合，专为作物病害识别和处方（CDIP）而设计。</strong></p>
<p>在对 48 种疾病和 13 种作物的 10 个 DL 模型进行评估后，EfficientNet-B2 在 95% 的置信度下获得了 97.97% ± 0.16% 的最高准确率。在此基础上，我们利用低库适应（LoRA）和冻结调整对广泛使用的 ChatGLM3-6B LLM 进行了微调，优化了其提供精确疾病管理处方的能力。我们比较了两种训练策略–多任务学习（MTL）和双阶段混合微调（DMT）–使用特定领域数据集和一般数据集的不同组合。使用 DMT 进行冻结调整后，性能大幅提高，BLEU-4 提高了 33.16%，平均 ROUGE F 分数提高了 27.04%，超过了原始模型和 Qwen-max、Llama-3.1-405B-Instruct 和 GPT-4o 等最先进的竞争对手。CDIPChatGLM3 的双模型架构充分利用了计算机视觉在基于图像的疾病检测方面的互补优势，以及 LLM 在上下文化、特定领域文本生成方面的互补优势，提供了无与伦比的专业性、可解释性和可扩展性。与混合模式的资源密集型多模态模型不同，我们的双模态方法既能保持效率，又能在疾病识别和可操作处方生成方面实现卓越性能。</p>
<h3 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h3><p>在这项研究中，我们引入了一种双模型方法，既能准确识别疾病，又能提供及时、交互式的精准处方建议。</p>
<p><strong>这种方法集成了先进的深度学习视觉模型和专门的中文模型，该模型在高质量的专家资料基础上进行了微调</strong>。可以得出三个主要结论。</p>
<p>首先，我们建立的基于 EfficientNet-B2 的疾病识别模型优于所有其他模型，在 95% 置信度下，准确率达到 97.97 % ± 0.16 %，召回率达到 97.17 % ± 0.46 %，F1 分数达到 97.12 % ± 0.10 %，精确率达到 97.18 % ± 0.59 %。</p>
<p>其次，CDIP-ChatGLM3微调模型采用Freeze方法和DMT训练策略，在农作物病虫害防控语料库的专业数据集和通用数据集的不同组合上进行了评估，在专业能力和通用能力上都优于其他模型，在BLEU-4、ROUGE和CMMLU准确度指标上都取得了大幅提高，并且错误率较低。</p>
<p>最后，CDIP-ChatGLM3 以病害图像为输入，实现了及时、交互式的准确病害防控，极大地方便了农民，确保了作物生产安全。今后，我们将开发效率和准确性更高的识别模型，以及专业性和通用性更强的大型语言模型，不断更新 CDIPChatGLM3 模型，供农民实际使用。</p>
<h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><h4 id="微调和RAG"><a href="#微调和RAG" class="headerlink" title="微调和RAG"></a>微调和RAG</h4><p>大语言模型（LLMs）非常适合解决为农民提供清晰的交互式指导等问题，因为它们擅长理解和生成类人文本（Raiaan 等人，2024 年；Zhao 等人，2023 年）。它们使用户能够通过直接、交互式的提问获得及时、可读的回复。研究表明，LLMs 在农业领域，尤其是作物管理领域非常有效（Raiaan 等人，2024 年；Yenduri 等人，2024 年）。例如，基于由 OpenAI 开发的 LLM–聊天生成预训练转换器（ChatGPT），Wang 等人（2022 年）开发了一个作物病虫害防治问题解答系统，其得分高于其他六种最先进的方法。Silva 等人（2023 年）对 Llama、GPT-3.5 和 GPT-4 等流行的大型语言模型回答农业相关问题的能力进行了评估，结果表明 GPT-4 的性能最高，能正确回答 93% 的问题。Qing等人（2023）提出了一种深度学习视觉模型YOLOPC和ChatGPT-4相结合的方法来准确识别柑橘的病虫害并提供诊断报告，实现了较高的识别和推理准确率。此外，==多模态 LLM 也被用于解决特定领域的问题，在某些任务中表现出卓越的性能（Kerdvibulvech，2025 年）==。虽然这些 LLMs 在一般语言任务中表现出色，但由于其训练数据中缺乏专业知识，它们在解决特定领域的问题（如与植物病害管理相关的问题）时往往举步维艰（Yang 等人，2024 年）。为了解决这些局限性并提高 LLM 在植物疾病管理等专业领域的性能，研究人员探索了将特定领域知识纳入这些模型的策略。检索增强生成（RAG）和微调是纳入专有和特定领域数据的两种常用方法（Gupta 等人，2024 年）。RAG 在相关数据唾手可得的情况下尤为有效，如农场数据解释，可生成简洁且符合上下文的准确回复（Lewis 等人，2020 年；Swenor，2022 年）。然而，在数据有限或不完整的情况下，依赖外部数据检索系统可能会导致性能不一致（S. Xu 等人，2024 年）。相比之下，“微调 ”技术通过在精心策划的数据集上对模型进行再训练，使其能够将特定领域的知识内化，从而增强其生成精确、上下文丰富的响应的能力，而无需依赖外部检索系统，但由于需要大量的数据准备和计算资源，因此前期成本较高（Xue 等人，2021 年）。</p>
<p>本研究旨在通过引入一种新颖的双模型集成方法，将专门的疾病识别模型与 LLM 结合起来，提供量身定制的处方，从而提高深度学习在作物病害管理中的实际应用。与以往试图在单一框架内处理图像识别和文本生成的多模式方法不同，我们的双模型方法利用了两个独立优化系统的优势。首先，我们评估了 10 种计算机视觉模型，以识别 13 种作物的 48 种疾病。接下来，我们使用两种方法对大型语言模型 ChatGLM3-6B 进行微调，以提高其在作物疾病管理领域的专业能力。最后，我们开发了 CDIPChatGLM3，将表现最佳的病害识别模型与微调后的 ChatGLM3-6B 结合起来，协助相关种植者进行作物病害识别和处方开具（CDIP）。这种双模型方法不仅提高了诊断和建议的整体准确性，还提供了更大的灵活性和可扩展性，允许对每个组件进行独立升级和改进。因此，农民可以从准确的病害诊断无缝过渡到精确的治疗建议，从而降低成本，最大限度地减少对环境的影响，并防止农药的过度使用。</p>
<h4 id="材料和方法"><a href="#材料和方法" class="headerlink" title="材料和方法"></a>材料和方法</h4><h5 id="1-Disease-identification-models"><a href="#1-Disease-identification-models" class="headerlink" title="1. Disease identification models"></a>1. Disease identification models</h5><h5 id="2-Large-language-model-and-fine-tuning"><a href="#2-Large-language-model-and-fine-tuning" class="headerlink" title="2. Large language model and fine-tuning"></a>2. Large language model and fine-tuning</h5><p><strong>2.1  数据集准备</strong></p>
<p>在 CDIP-ChatGLM3 的开发过程中，使用了==六==个数据集进行训练、测试、验证和基准测试，其中包括微调专用的 13-Crop 指令跟随数据集、通用数据集 Alpaca（Taori 等，2023 年）、通用语言能力基准测试数据集 CMMLU（Li 等，2023 年）、用于模型专业知识测试的定制专用数据集、用于多模态性能测试的图像理解测试数据集以及第 2.1.1 节中介绍的图像数据集。表 4 列出了这些数据集的主要特征。下文将详细介绍每个数据集的获取过程。13 种作物栽培指导数据集来自 13 本涉及作物栽培和疾病管理的书籍，每种作物有一本专门的书籍（见表 1）。由于<strong>高质量的微调数据集对下文采用的监督微调方法至关重要</strong>，因此采用了==<em>基于三阶段的高质量数据集生成方法（Dong 等人，2023 年）</em>==。与基于两阶段的 SELF-QA 方法（张和杨，2023 年）相比，该方法能生成更多更简洁的说明和更全面详细的答复，使农民更容易和更准确地进行操作。工作流程如图 4 所示。我们首先收集了有关 13 种作物病害管理的 PDF 格式专业教科书（见补充材料 STable1）。然后，利用光学字符识别（OCR）技术将文本内容提取为可编辑格式。随后，按章节、段落或病害类别对提取的文本进行人工分段，生成多个具有完整语义逻辑的特定上下文文本文件，每个分段保存为单独的 .txt 文件。</p>
<p>每个 txt 文件都作为上下文数据输入 Llama3.1-405b-instruct 模型，在准备好上下文数据后，微调数据集的生成分==三个阶段进行==（图 4）。首先，Llama3.1-405b-instruct 模型根据 Prompt1（如 STable2 所示），结合分区文本中的上下文信息生成指令。其次，根据提示 2（如表 3 所示）执行这些指令以产生初始输出。最后，Llama3.1405b-instruct 模型根据 Prompt3（如 STable 4 所示）将初始输出与上下文数据整合，从而完善了初始输出，确保了逻辑连贯性和关键见解的提取。为进一步说明这一过程，表 5 提供了一个示例，说明水稻纹枯病专业防控信息的指令数据生成过程。</p>
<p> <img src="/archives/Users\sxxgg\AppData\Roaming\Typora\typora-user-images\image-20250508103506712.png" alt="image-20250508103506712"></p>
<p>生成后，所有指令跟踪数据都要经过人工检查、数据清理和整合，以构建一个全面、高质量的指令跟踪数据集，用于 13 种作物的病害管理。图 5 显示了为每种作物生成的指令跟踪数据实例数量。对每种作物类别的实例数进行了校准，以实现均匀分布，各类别共生成 2,500 个实例，每个实例占总数的 6.7% 到 9.6%。==该数据集用于微调大型语言模型==，在训练过程中随机抽取 10% 作为验证集，以确保作物类别分布一致。</p>
<p><img src="/archives/Users\sxxgg\AppData\Roaming\Typora\typora-user-images\image-20250508104730734.png" alt="image-20250508104730734"></p>
<p>由于其广泛的多样性和全面的领域覆盖（表 4），我们选择了公开可用的 ==Alpaca 数据集==来减轻灾难性遗忘，该数据集包含大量多样化、高质量和开放式的通用问题，涵盖数学和编码等多个领域。灾难性遗忘在特定领域的大型语言模型中非常常见（Kirkpatrick 等人，2017 年），尤其是在学习专业知识和术语时。获取专业知识往往会导致常识的丢失，从而削弱它们的语言能力。将一部分通用数据与专业知识数据混合在一起，可以帮助模型 “回忆 ”丢失的通用知识，缓解专业知识训练过程中的灾难性遗忘问题（Hayes 等人，2020 年）。我们将羊驼作为通用数据集，与我们关于 13 种不同作物的高质量指令跟踪专用数据集相结合，进行微调训练（Dong 等人，2023 年；Taori 等人，2023 年）。通过设定专门数据集与羊驼数据集的混合比例，预计灾难性遗忘问题将得到大幅缓解。</p>
<p>==中文大规模多任务语言理解（CMMLU）基准数据集==（Li 等人，2023 年）用于测试模型微调后的推理能力。CMMLU 是一个综合基准，旨在评估大型语言模型在中国语言和文化背景下的知识和推理能力。它横跨 67 个学科，包括科学、技术、工程和数学（STEM）领域、社会科学和人文科学，尤其侧重于中国特有的任务，如中医和中国驾驶规则。数据集由单项选择题组成，每个科目都有少量的开发集和更广泛的测试集。这些问题及其答案选择旨在测试模型对复杂和特定领域知识的理解，因此是评估 ChatGLM 等中文模型在不同领域应用情况的重要工具。</p>
<p>🚩为了测试微调模型的专业能力，我们从微调专业数据集中选取了 200 个经常遇到或具有代表性的农作物病害防控问题，并以这些问题的原始答案作为标准答案，==创建了专业能力测试数据集==。根据这些选定的问题，使用 Llama3.1-405b-instruct （S. Chen 等，2023 年）获得了每个问题的四个变体，表达了与原问题相同的意思（变体获得过程见补充材料 STable 6）。原问题和标准答案以及四个变体组成一组。所创建的专业知识测试数据集共包括 200 组。在测试模型的专业能力时，将这些问题组分别输入微调模型、原始模型和三个最先进的模型，包括 GPT-4o（Achiam 等，2023 年）、Llama3.1-405b-instruct 和 Qwen-max（Bai 等，2023 年），并生成答案，以评估其专业能力。</p>
<p>为了比较我们的模型和 SOTA 多模态语言模型在疾病图像上的分类性能，我们从每个疾病类别中随机选取了 10 张图像来构建==图像理解测试数据集==。</p>
<p><strong>2.2  ChatGLM3-6B 作为基础大语言模型</strong> </p>
<p>ChatGLM3-6B 是 ChatGLM 系列的高级版本，专为中文语言任务而设计，是在专业领域进行微调的理想基础模型，如作物病害管理等涉及受教育程度较低的中国农民的领域（GLM 等人，2024 年）。此外，ChatGLM3-6B 在整体性能和计算效率之间实现了最佳平衡。它拥有 60 亿个参数，在提供强大的通用语言理解能力的同时，还能在现有 GPU 上进行微调，特别是与拥有数百亿参数的大型模型相比。ChatGLM3 的大小适中，可以在标准硬件限制条件下进行高效的模型训练和微调，因此对于计算资源有限的机构或研究人员来说是一个可行的选择。此外，ChatGLM3-6B 还能在各种任务中保持强劲的性能，确保它既能处理一般语言处理，又能进行特定领域的微调，如作物疾病管理（GLM 等，2024 年）。与 ChatGPT 等流行的 LLM 相比，GLGM3-6B 既能整合专业知识，又能保留通用语言能力，而且广泛可用，这使它成为微调的多功能实用选择。</p>
<p><strong>2.3. 微调 ChatGLM3-6B 以管理作物病害</strong></p>
<p>尽管 ChatGLM3-6B 在自然语言处理任务方面具有很高的能力，但仍有必要进行微调，以满足农民在有效处理作物疾病方面的特定需求（Gupta 等人，2024 年）。通过根据作物保护方面的农业需求调整输出，微调可提高模型在疾病防治领域的响应能力。应仔细评估和选择常用的微调方法，以最大限度地提高这些领域的能力。为此，我们利用 LLaMA-Factory 操作平台（Zheng 等，2024 年）进行了模型微调。比较了两种广泛使用的微调方法：低秩自适应法（Low-Rank Adaptation，LoRA）和冻结微调法（Freeze）（Houlsby 等，2019；Hu 等，2021；Zheng 等，2024）。随后，对 ChatGLM3-6B 进行了全面微调，以增强其专业能力，同时保留其一般语言能力。</p>
<p>LoRA 是一种微调方法，旨在以最少的可训练参数有效地调整预训练语言模型。它的工作原理是在预训练模型的各层中引入==低秩适配器==，只训练降维矩阵和增维矩阵，而核心模型参数保持不变（Hu 等人，2021 年）。这使得训练过程更加集中，计算效率更高。该过程包括三个关键步骤：加载预训练模型、插入 LoRA 适配器和训练适配器。</p>
<p>另一方面，==冻结调整法==会选择性地冻结预训练模型中的特定层或大部分参数，在微调过程中只允许更新一小部分解码器层参数（Houlsby 等人，2019 年；Levine 等人，2022 年）。这种方法有助于保留预训练阶段学习到的特征，从而保留核心知识，同时使模型适应特定任务的需要。冻结调整法的微调过程包括四个步骤：加载预训练模型、冻结所需图层、根据需要修改模型以及训练模型。</p>
<p>不同的微调方法可能会在不同的任务中产生不同的性能水平（Dettmers 等人，2024；Jeong，2024）。在本研究中，我们在表 5 所列参数（包括批量大小、学习率和历时变化等细节）下对 ChatGLM3-6B 上的两种微调方法进行了评估。这些微调方法在多个 epoch（3、5、10、15、20 和 30）中进行了测试，主要区别在于 Freeze 方法的可训练层数、LoRA 的特定值（如 LoRA alpha (16)和 rank (8)），以及选择 AdamW 作为优化器和余弦学习率调度器。此外，表 5 最后两行还提供了在单个英伟达 4090 GPU 上微调 ChatGML3 的运行性能。微调方法的比较有助于找出最有效的方法，在遵守计算限制的同时提高模型的疾病预防和控制能力。</p>
<p>如前所述，微调可能会导致灾难性遗忘，削弱通用语言能力。为了对模型进行微调，在增强专业能力的同时保留通用语言能力，我们引入了两种训练策略，包括多任务学习（MTL）和双阶段混合微调（DMT）（Dong 等人，2023 年），以确定专业数据集和通用数据集不同组合的最佳效果，并对它们的性能进行了系统比较。MTL 直接混合专业数据和通用数据进行微调。相比之下，DMT 首先在专业数据集上执行微调，然后利用不同比例的专业数据和一般数据进行进一步微调，以提高模型性能。设计了一个工作流程来说明整个微调过程（图 6）。</p>
<p><img src="/archives/Users\sxxgg\AppData\Roaming\Typora\typora-user-images\image-20250508113101215.png" alt="image-20250508113101215"></p>
<p>工作流程以生成的专用作物病害防治数据集（称为 13 种作物指令跟踪数据集）开始，<strong>然后使用冻结和 LoRA 方法进行微调</strong>。微调完成后，将进行评估，以选择最佳微调方法和性能最佳的模型。在选定方法和模型的基础上，<strong>使用 MTL 和 DMT 进行进一步微调</strong>，并对微调结果进行比较，以确定在保留一般语言能力的同时实现最高专业知识性能的模型。</p>
<p><strong>2.4. 评估微调 LLM 的指标</strong></p>
<p>为了评估两种微调方法和两种训练策略的效果，我们采用了四种常用指标，包括==双语评估研究（BLEU）==、==面向语料库评估的召回研究（ROUGE）==、==CMMLU 准确率和输出错误率。==BLEU 用于评估机器翻译输出的质量（Papineni 等人，2002 年）。它主要衡量机器翻译输出与参考译文之间的相似度，尤其注重句子的准确性和精确匹配。BLEU 通过计算 n-grams（N 个连续词的序列）的匹配程度来评估机器翻译的精确度。BLEU 的基本原理是，机器翻译输出越接近专业人工翻译，质量就越高。BLEU 分数越高，说明机器翻译性能越好。ROUGE 指标通常用于评估文本摘要，比较自动生成的文本与参考摘要之间的重叠程度（Lin，2004 年）。我们使用了它的三种变体，包括 ROUGE-N、ROUGE-L 和平均 ROUGE F-score（Zhang 等人，2019 年）。该指标经常被用来评估自动摘要系统、机器翻译或任何涉及自然语言文本生成的任务的性能。平均 ROUGE F 分数越高，说明生成的文本与参考文本之间的一致性越好，表明模型生成的输出更连贯、更相关、更准确。</p>
<p>BLEU 和 ROUGE 都能帮助我们深入了解 ChatGLM3-6B 等模型生成的文本的质量。BLEU 通过评估 n-gram 匹配度来关注机器翻译的准确性和流畅性，而 ROUGE 则通过与人类参考摘要的比较来评估自动生成文本的内容保留和连贯性。这些指标有助于衡量微调模型在作物病害管理等特定领域任务中的准确性和意义。</p>
<p>为了评估模型的一般语言能力，我们采用了 CMMLU 准确率来衡量正确回答的问题与问题总数的比率，其计算公式如下：  </p>
<p><img src="/archives/Users\sxxgg\AppData\Roaming\Typora\typora-user-images\image-20250508114019418.png" alt="image-20250508114019418"></p>
<p>其中 Qcorrect 表示正确回答问题的数量，Qtotal 表示所有问题的数量。</p>
<p>此外，在生成答案的微调过程中，我们观察到该模型在不同的历时中以不同的概率重复循环，导致回答时间过长。这些重复循环可能会极大地破坏模型的鲁棒性。为了评估这种可能性，我们引入了输出错误率（简称错误率）来量化此类错误发生的可能性，计算公式如下：</p>
<p><img src="/archives/Users\sxxgg\AppData\Roaming\Typora\typora-user-images\image-20250508114008327.png" alt="image-20250508114008327"></p>
<p>其中，Rtoken 表示超过 5000 个标记的响应数，Rtotal 表示生成的响应总数。</p>
<p>此外，为了评估 LLM 模型的计算资源需求，我们采用了以下公式来估算其内存使用量（Anthony 等人，2023 年）</p>
<p><img src="/archives/Users\sxxgg\AppData\Roaming\Typora\typora-user-images\image-20250508113945322.png" alt="image-20250508113945322"></p>
<p>其中，M 表示 GPU 的近似内存需求，提供了执行模型所需的视频随机存取内存 (VRAM) 的简化估算。P 是模型中参数的数量。Q 表示每个参数的数值精度，以比特为单位。</p>
<h5 id="3-CDIP-ChatGLM3-Integration-of-identification-models-and-fine-tuned-LLM"><a href="#3-CDIP-ChatGLM3-Integration-of-identification-models-and-fine-tuned-LLM" class="headerlink" title="3  CDIP-ChatGLM3: Integration of identification models and fine-tuned LLM"></a>3  CDIP-ChatGLM3: Integration of identification models and fine-tuned LLM</h5><p>通过将选定的最佳作物病害识别模型（CDIP）与经过微调的高性能 ChatGLM3-6B 相集成，我们创建了 CDIP-ChatGLM3，这是一种用于作物病害管理的实用工具。集成工作按照以下工作流程完成。</p>
<p>首先，采集并上传病害图像，然后使用作物病害识别模型进行分析。生成识别结果后，将其转换为中文关键词，然后将其嵌入查询或会诊中，形成特定病害会诊。然后将该咨询提交给经过微调的 ChatGLM3-6B。为了获得准确的回复，LLM 的指令如下：</p>
<p>您现在是一名作物病害预防助理。请用中文回答问题，详尽描述每个问题的具体细节，并以结构化格式显示内容。”  </p>
<p>指令执行后，LLM 会输出回复，将病害相关的关键词嵌入预定义的模板中：  “叶子的状态是{关键词}。如果您有任何问题，请随时提问”。</p>
<p> 然后，农民就可以获得有关识别结果的回复，或直接与系统互动，获取相关知识或他们所寻求的任何信息。</p>
<p>这种集成实现了疾病识别模型与 LLM 的无缝结合。有了用于疾病识别的选定深度学习视觉模型和用于处方的微调 ChatGLM3-6B，我们开发并部署了基于 CDIP-ChatGLM3 的应用程序。当上传疾病图像时，CDIP-ChatGLM3 会以及时、互动的方式为预防和控制提供可靠、准确的响应。有了 CDIP-ChatGLM3，疾病预防和控制的效率可以大大提高。</p>
<h5 id="4-Experiments-design"><a href="#4-Experiments-design" class="headerlink" title="4 Experiments design"></a>4 Experiments design</h5><p><strong>2.4.1. 微调过程中模型专业知识和一般语言能力变化的实验</strong> </p>
<p>为了选择最佳的微调方法并评估微调后模型的特定疾病专业知识和一般语言能力，我们使用 LoRA 和 Freeze 对特定领域数据集和特定领域与一般数据集的组合进行了微调实验。微调在 30 个epoch中进行。最终选择了性能最高的微调方法，利用 MTL 和 DMT 训练策略在特定领域和一般领域相结合的数据集上进行进一步微调，目的是在保持一般语言能力和低错误率的同时，保持较高的专业能力。中文大规模多任务语言理解（CMMLU）基准（Li 等人，2023 年）被用来评估微调后的模型在中国文化背景下的通用语言能力。在这里，“零拍学习 ”是直接将提示输入到 LLM，而 “五拍学习 ”则是在目标任务中展示一系列高质量的示范，每个示范都包括输入和期望输出。在 “五次学习 ”中，模型首先要接触高质量的示例，以便更好地理解人类的意图和确定理想答案的标准。</p>
<p><strong>2.4.2. 微调模型在原始特定领域材料及其变体上的性能评估</strong></p>
<p>为了进一步检验微调模型是否能够学习、理解和应用微调专业数据集中的知识，我们对==专业知识能力测试数据集==进行了评估。我们使用原始的 ChatGLM3-6B、经过微调的 ChatGLM3-6B 以及三个最先进的 LLM 模型（包括 GPT-4o、Llama-3.1-405B 和 Qwen-max），对==数据集中的每组五个问题==生成了回答。随后，我们将生成的答案与标准答案（即原始训练材料中的答案）进行了比较。我们使用 BLEU-4 和平均 ROUGE F 分数来评估五个大型语言模型在回答疾病相关问题时的专业能力。</p>
<p><strong>2.4.3. CDIP-ChatGLM3 和多模态模型的比较评估</strong></p>
<p> 为了评估我们提出的双模型 CDIPChatGLM3 和多模态模型在疾病图像分类和理解中的性能，我们设计并进行了一项比较实验。几种最先进的通用<em><strong>多模态语言模型</strong></em>，包括 LLaVA-v1.6-7B（Li 等人，2024 年）、MiniCPM-V-2.6（Yao 等人，2024 年）、Llama-3.2-11B-Vision-Instruct（Dubey 等人，2024 年）、GLM-4-4.5（Dubey 等人，2024 年）、Llama-3.2-11B-Vision-Instruct（Dubey 等人，2024 年）、 2024 年）、GLM-4vPlus-20250111（GLM 等人，2024 年）、Qwen2.5-VL-72B-Instruct（A. Yang 等人，2024 年）、DeepSeek-VL2（Wu 等人，2024 年）和 InternVL2.5-78B （Chen 等人，2024 年）。我们使用了这些模型提供的应用程序接口或其公开的预训练版本，没有进行任何微调或训练。具体来说，LLaVA-v1.6-7B、MiniCPM-V-2.6 和 Llama-3.2-11B-Vision-Instruct 是通过 INT4 或 Q4_K_M 格式的 Ollama 推理框架在本地运行的，而 Qwen2.5-VL-72B-Instruct、DeepSeek-VL2 和 InternVL2.5-78B 则是通过 BF16 量化的外部应用程序接口访问的。GLM-4v-Plus-20250111 是闭源的，没有提供相应的模型信息。同时，CDIP-ChatGLM3 采用了 ==FP16（16 位）量化==。内存计算公式（式（7））用于估算这些模型的 GPU 内存需求。</p>
<p>==构建的图像理解测试数据集==被输入到这些模型中。为了确保公平比较，特别是与专门的双模型 CDIP-ChatGLM3 进行比较，我们将所有多模态语言模型的提示标准化如下：  “图片中是什么疾病？请从以下列表中选择一个且只有一个选项，并准确输出该选项，不要有任何多余的词语： [48 种作物疾病类别 + 13 种健康作物类别]”。 </p>
<p>最后，采用准确率（Acc）和 F1 分数作为评价指标，全面量化模型在疾病图像分类和理解方面的能力。此外，我们还采用了第 2.4.2 节所述的相同方法来评估专业能力，并利用专业能力测试数据集评估我们的方法和多模态模型在农业领域的专业能力。</p>
<p><strong>2.4.4. 计算环境</strong> </p>
<p>实验在配有英特尔（R）酷睿（TM）i9-14900 K CPU、128 GB 内存和英伟达（R）RTX 4090 显卡（24 GB 显存）的系统上进行。软件环境包括 Windows 11、CUDA 12.6 版、Python 3.10.14 版和 PyTorch 2.4.0 版。这种配置能够对模型进行有效的微调和评估，确保其能够为农民提供实时、准确的疾病管理建议。</p>
<h3 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h3><h4 id="1-疾病识别模型的性能"><a href="#1-疾病识别模型的性能" class="headerlink" title="1. 疾病识别模型的性能"></a>1. 疾病识别模型的性能</h4><p>10 个分类模型对疾病分类的实验结果如图 7 所示。</p>
<p><img src="/image-20250508153649923.png" alt="image-20250508153649923">采用 EfficientNet 架构的模型在所有指标上都取得了最高和最低的性能，其中 EfficientNetB2 排名第一，EfficientNetV2-S 排名最后。ResNet、MobileNet 和 Swintransformer 的性能接近和中等偏上。FasterNets 的性能仅低于最高的三个 EfficientNets。在大多数架构中，不同规模的模型及其变体在性能上仅有细微差别。只有 EfficientNet 中的 EfficientNetV2-S 的性能明显低于其他 EfficientNet，而两个 FasterNet 的性能差异较小。在 10 个模型中，EfficientNet-B2 在 95% 置信度下的准确率（97.97 % ± 0.16 %）、召回率（97.17 % ± 0.46 %）、精确率（97.18 % ± 0.59 %）和 F1 分数（97.12 % ± 0.10 %)都是最高的。</p>
<p><img src="/image-20250508153913429.png" alt="image-20250508153913429"></p>
<p>图 8 显示了表现最佳的 EfficientNet-B2 模型对所有病害的分类准确率，其中樱桃、柑橘、玉米、葡萄、桃、草莓和番茄作物的分类准确率较高。在这些作物中，大多数病害类别的准确率超过 95%，相当一部分达到了 100%。相比之下，苹果、辣椒、马铃薯、水稻和小麦作物的病害分类准确率相对较低，而且这些作物中不同病害类别的准确率差异很大。值得注意的是，樱桃和草莓作物的平均分类准确率最高，达到 100%，而水稻的平均准确率最低，水稻糙叶病的分类准确率仅为 70.18%。有关病害识别模型的更多详情，请参阅补充材料。具体而言，图 5 显示了前 40 个错误分类对，而图 6 则显示了模型在不同级别的分类性能。</p>
<h4 id="2-CDIP-ChatGLM3-在疾病管理处方中的表现"><a href="#2-CDIP-ChatGLM3-在疾病管理处方中的表现" class="headerlink" title="2. CDIP-ChatGLM3 在疾病管理处方中的表现"></a>2. CDIP-ChatGLM3 在疾病管理处方中的表现</h4><p><img src="/image-20250508154400526.png" alt="image-20250508154400526"></p>
<p>图 9 展示了使用 LoRA 和 Freeze 方法对 ChatGLM3-6B 在专业数据集上的微调结果（图 9a 和图 9b），以及微调后模型在基准 CMMLU 上的一般能力测试结果（图 9c 和图 9d）。结果表明，两种微调方法的 BLEU-4 和 ROUGE 分数都随着微调历时的增加而增加，与原始 ChatGLM3-6B 相比性能有所提高。值得注意的是，==Freeze 方法的性能明显优于 LoRA==，在第 10 个历元时，BLEU-4 指数接近 350。与此同时，普通语言能力在微调过程中出现了波动，性能指标低于原始 ChatGLM3-6B。此外，LoRA 微调方法的错误率较高，其特点是最初急剧上升，随后迅速下降。相比之下，Freeze 方法的错误率较低，但在不同的时间段会出现波动。在第 10 个阶段，专业能力指标相对较高，错误率也较低。尽管与最初的 ChatGLM3-6B 相比，普通语言能力略有下降，但考虑到所有因素，它仍然是最佳模型。相比之下，虽然在第 20 个历元可以获得较好的专业能力，但普通语言能力和错误率明显下降，导致鲁棒性和准确性较差。这些结果表明冻结法在专业数据集上的微调效果更佳，==因此在后续实验中采用冻结法（Freeze10）在第 10 个时程对模型进行微调。==</p>
<p><img src="/image-20250508155318463.png" alt="image-20250508155318463"></p>
<p>图 10 展示了在第 10 个历元冻结（Freeze10）和冻结方法所选择的微调模型的基础上，使用 MTL 和 DMT 训练策略对专业语言能力和通用语言能力相结合的数据集进行进一步微调的结果。在使用 MTL 时（图 10a），专业能力首先随着通用数据的增加而逐渐提高，当通用数据为专业数据的四倍时，BLEU-4 和 ROUGE 达到最高。同时，错误率先是平稳变化，然后急剧上升，在专业能力达到峰值的同一时刻达到最高值。与此相反，当使用 DMT 时（图 10b），专业能力随着专业数据集的增加而迅速提高，直到达到专业数据集的最大值，随后在一般数据增加到专业数据集的两倍之前，专业能力的上升速度放缓。同时，错误率也在波动，在加入最大专业数据集后达到最低值（图 10b）。另一方面，模型的普通语言能力在专业知识能力达到峰值的同一位置达到了接近峰值的水平，接近原始 ChatGLM3-6B 的性能（图 10d）。考虑到所有这些因素，==当包含最大数量的专业数据集和等量的一般数据时，DMT 方法取得了最佳性能。==在一般语言能力方面，零次拍摄法和五次拍摄法存在差异。采用零次搜索法时，准确率较高，但随着普通数据比例的增加（图 10c 和图 10d）或历时的增加（图 9c 和图 9d），准确率会出现波动。相比之下，采用五次拍摄法时，大多数模型的准确率都低于零次拍摄法，表现出与零次拍摄法相似的性能趋势。零发和五发都没有发现明显的变化。==根据上述实验结果，我们最终选择 Freeze10(S:2.5 K)-DMT(S:2.5 K + G2.5 K) 模型作为开发 CDIP-ChatGLM3 的微调模型==</p>
<p><img src="/image-20250508155839108.png" alt="image-20250508155839108"></p>
<p>我们的微调模型和其他比较模型的专业能力测试结果如图 11 所示。当应用于疾病控制和预防领域时，我们的微调模型在 BLEU-4 指数和平均 ROUGE F 分数方面都明显优于所有其他模型。原始 ChatGLM3-6B 的 BLEU-4 指数值在所有评估模型中最低。Llama-3.1405B-Instruct 排名第二，但明显低于我们的微调 ChatGLM3-6B（CDIP-ChatGLM3）。相比之下，GPT-4o 的 BLEU4 指数与 ChatGLM3-6B 相当，是最低的。此外，Qwen-max 的 BLEU4 指数仅略高于最低值。不过，按平均 ROUGE F 分数或 BLEU-4 排序时，这些模型的排名各不相同，但 CDIP-ChatGLM3 在这两项指标上始终排名第一。具体来说，GPT-4o 和 Qwen-max 的平均 ROUGE F score 相近，但都明显低于最高分。ChatGLM3-6B 的平均 ROUGE F 分数略低于 Qwen-max。Llama-3.1-405B-Instruct 的 BLEU-4 指数排名第二，但平均 ROUGE F 分数最低。</p>
<p><img src="/image-20250508160018031.png" alt="image-20250508160018031"></p>
<p>表 6 列出了我们的模型与流行的通用多模态模型在图像分类能力和专业知识能力方面的比较实验结果。在所有多模态模型中，Qwen2.5-VL-72B-Instruct、InternVL2.5-78B 和 GLM-4v-Plus20250111 在图像识别能力和专业知识能力上都取得了前三名的成绩，但内存消耗却明显高于其他模型。相比之下，LLaVA-v1.6-7B 和 MiniCPM-V-2.6 表现出中等的特定领域专业能力，但在图像识别和最小内存需求方面表现最低。与这两个模型相比，==DeepSeek-VL2 在图像识别方面表现一般，在专业性方面排名垫底。==虽然 Llama-3.2-11B-VisionInstruct 所需的内存少于大多数多模态模型，但它在特定领域的专业性却是最低的。==<em><strong>这些结果表明，通用多模态模型的预训练版本或 API 访问只能在我们的数据集（疾病图像和疾病指导问答）上取得有限的性能，尤其是在图像分类和专业知识任务中（表 6）。</strong></em>==相比之下，我们的双模型 CDIP-ChatGLM3 经过了视觉训练和微调，在这两方面都取得了明显更好的性能。值得注意的是，与大多数多模态模型相比，我们的模型体积最小，推理内存消耗也更少，因此可以用相对有限的资源进行训练和部署。</p>
<p><img src="/image-20250508160527327.png" alt="image-20250508160527327"></p>
<p>此外，表 7 还列出了所有测试过的视觉和语言模型的综合性能总结，以方便读者阅读。为了进一步评估 CDIP-ChatGLM3 在实际应用中的性能，表 8 列出了由原始 ChatGLM3-6B 和微调模型 CDIP-ChatGLM3 分别生成的葡萄霜霉病防治处方样本。在 Q1 问题及其回答中，下划线文字表明，==CDIP-ChatGLM3 对 “典型的时间框架是什么 ”和 “化学防治 ”的回答比原 ChatGLM3-6B 更具体，更有可操作性。==关于葡萄生长阶段的详细信息，以及具体的化学药剂名称和使用方法，为农民有效控制病害提供了实用指导。在后续问题 Q2 中，与原始模型相比，微调模型提供的综合病害管理建议更全面、逻辑结构更合理、可操作性更强。相比之下，原 ChatGLM3-6B 的回答过于笼统，限制了其对农民的实际应用。</p>
<p>此外，补充材料 STable 7 中还列出了三个比较大型 LLM-GPT-4o、Qwen-max 和 Llama-3.1-405B-Instruct 的响应。与这些模型相比，CDIP-ChatGLM3 提供的建议更实用、更易于实施，在特定领域的决策情境中表现出更高的精确度。然而，在定性调查中，其他大型语言模型比 CDIP-ChatGLM3 得出的回答更全面、更广泛。如需了解更多实例，请参阅补充表 9 和表 10 中的稻瘟病和小麦叶枯病处方。</p>
<h3 id="讨论"><a href="#讨论" class="headerlink" title="讨论"></a>讨论</h3><p>作物病害管理方面的挑战需要有效的识别和处方解决方案，以提高农民对先进技术的采用率。目前的 DL 模型在识别植物病害方面具有很高的准确性，但无法提供可操作的指导，从而限制了其实际效果。本研究通过开发 CDIP-ChatGLM3 来应对这些挑战，==CDIP-ChatGLM3 是一个双模型框架，它整合了用于病害识别的 EfficientNet_b2 的精确性和经过微调的 ChatGLM3-6B 的背景专业知识。==通过将精确检测与量身定制的处方相结合，这种方法缩小了技术能力与实际可用性之间的差距，促进了人工智能驱动的解决方案在农业领域的应用。</p>
<h4 id="4-1-疾病识别模型的性能"><a href="#4-1-疾病识别模型的性能" class="headerlink" title="4.1. 疾病识别模型的性能"></a>4.1. 疾病识别模型的性能</h4><p> 涉及十个广泛使用的深度学习模型的广泛对比实验，在实验室和现场图像的综合数据集上进行评估，得出了两个重要发现。</p>
<p>首先，在同一架构中，模型大小对性能的影响微乎其微。虽然较大的模型规模可能会略微改善结果，但差异仍然不大。与训练数据相比，在大多数情况下，架构对模型准确性的影响几乎可以忽略不计，这与 Tian 等人（2024 年）的研究结果一致。==其次，大多数 EfficientNets 的性能都优于其他深度学习架构==，其中 EfficientNet-B2 的性能最高，在 95% 置信度下的准确率为 97.97 % ± 0.16 %。与我们的研究类似，Tian 等人（2024 年）比较了 ResNet、MobileNet 和效能 B0，发现效能 B0 的准确率最高。尽管他们的比较只涉及 Efficient-B0，但他们的发现与我们的研究结果一致。此外，Atila 等人（2021 年）对 ResNet 和 EfficientNet 的比较也与我们的研究结果一致。虽然在他们的研究中使用 EfficientNet-B2 获得了更高的准确率，但这只是基于 PlantVillage 数据集，并没有在像我们研究中使用的那样广泛的数据集上进行验证。Zhang 等人（2024 年）仅在 Plant Village 数据集的玉米上使用 ResNet50 实现了 87.51% 的最高准确率，准确率低于我们的研究结果。==EfficientNets 和 EfficientNet-B2 的优越性可能归功于最佳复合缩放方法==，该方法结合了深度、宽度和分辨率（Tan 等人，2019 年），在满足病害识别基本要求的同时有可能降低成本。高精度、轻量级的 EfficientNet-B2 可以生成准确的疾病识别结果，确保大语言模型能够提供快速准确的处方。</p>
<h4 id="4-2-微调对语言模型能力的影响"><a href="#4-2-微调对语言模型能力的影响" class="headerlink" title="4.2. 微调对语言模型能力的影响"></a><strong>4.2. 微调对语言模型能力的影响</strong></h4><p>微调实验揭示了两个关键问题。</p>
<p>==<strong>首先，当使用专业数据集进行微调时，大型语言模型（LLMs）的专业能力会显著增强。</strong>==然而，专业能力的提高是以普通语言能力的逐渐下降为代价的。这种影响可归因于微调过程，在这个过程中，与特定领域知识相关的参数会被调整，而管理一般知识的参数也必须适应更新后的特定领域参数。因此，常识参数可能会偏离其预期功能，导致模型的整体通用性下降。这一发现与 Dong 等人（2023 年）的研究结果一致，他们强调了微调过程中专业语言能力和通用语言能力之间的对抗性互动，==证实了针对专业任务的微调可能会无意中阻碍模型更广泛的语言能力。==Wang 等人（2024 年）和 Tariq 等人（2024 年）也验证了微调对专门能力的有效性。此外，虽然 Llama、ChatGPT 和 ChatGLM 等模型的比较结果可能与我们的不同–可能是由于研究重点和实验设置的不同–但 Wang 等人（2023 年）强调了微调在农业技术知识问答应用中的有效性。</p>
<p>利用专业数据和通用数据的平衡组合对 LLM 进行微调，可以增强其特定领域的专业能力，同时保留通用语言能力。仅使用专用数据集进行微调往往会降低通用能力，因此需要采取策略，在不影响专用性的情况下恢复通用能力。虽然结合专业数据和通用数据进行微调似乎可以解决这个问题，但简单地合并数据集只能在专业化方面带来微不足道的收益，而且会削弱通用能力。==事实证明，两阶段微调方法–首先在专用数据集上进行微调，然后在混合数据集上进行微调–更为有效。==Cook 等人（2024 年）和 Dong 等人（2023 年）的研究结果证实，这种方法既能恢复一般能力，又能保留改进的专业化能力。同样，陈俊英等（2023 年）证明了在开发华佗 GPT-II 中药模型时，适当的微调顺序和数据组成的重要性。此外，Tinn 等人（2023 年）强调，微调策略（如冻结层）可以稳定基线模型，并改善特定领域应用的结果，这突出表明需要根据模型大小和目标定制特定任务的方法。此外，处方实验表明，CDIPChatGLM3 比其他模型提供了更好的具体可行建议。这进一步证实了微调过程的有效性，与定量指标比较结果一致。</p>
<p>同时，这也强调了有针对性的训练和专门数据集的重要性。相比之下，对比模型比 CDIP-ChatGLM3 提供了更全面、更扩展的反应，显示出更出色的通用语言能力。其中一个可能的原因是，CDIP-ChatGLM3 的模型规模相对较小，与参数数量更大、常识基础更广泛的 LLM 相比，通用语言能力较弱（赵等人，2023 年）。</p>
<p>因此，可以得出这样的结论：对混合专业知识和通用数据集的微调，以及在很大程度上取决于模型大小的固有语言能力，共同决定了最终的专业化性能。</p>
<h4 id="4-3-农作物病害诊断的识别与处方集成"><a href="#4-3-农作物病害诊断的识别与处方集成" class="headerlink" title="4.3. 农作物病害诊断的识别与处方集成"></a><strong>4.3. 农作物病害诊断的识别与处方集成</strong></h4><p>将用于病害识别的高效深度学习视觉模型与用于病害防控知识咨询的微调语言模型（即 CDIP-ChatGLM3）进行集成，为从业人员提供实用灵活的农作物保护工具。通过这种集成，可以快速准确地识别作物病害，并及时开出专业处方，还可以进行即时互动交流。与我们的研究类似，Qing 等人（2023 年）将识别模型 YOLOv8 与 GPT4 相结合，旨在解决准确分析农业病虫害图像并提供诊断报告的难题。然而，他们的研究只涉及两种作物和几种病害。此外，他们只是使用了通用的 GPT4，并没有使用足够的专业材料对其进行微调，导致 LLM 无法对特定作物病害做出专业反应。因此，他们的系统可能无法满足农民的实际使用要求。虽然通用多模态语言模型在通用任务中表现出了卓越的性能，并展示出了很高的通用性，但我们的对比实验表明，尽管模型规模大大增加，它们在作物疾病识别和处方等特定领域任务中的性能仍然不理想（表 6）。这一发现与 Kerdvibulvech（2025 年）的研究结果一致，后者认为==零镜头多模态语言模型在简单、一般的任务中表现出色，但在更复杂、特定领域的任务或训练样本有限的任务中表现不佳==。造成这种差异的原因可能是对通用训练数据的依赖，导致缺乏特定领域的示例。此外，为了提高它们在各种任务中的通用性，还需要进行权衡，从而影响了在特定领域任务中的表现。相比之下，CDIP-ChatGLM3 在专业知识数据集上进行了微调，在农作物疾病和处方任务中表现出了很高的性能。</p>
<p>此外，对于特定领域的多模态模型，Lu 等人（2024 年）在农业疾病检测和问题解答系统中使用了多模态变换器。尽管他们取得了很高的性能，但他们的研究涉及的作物和疾病相对有限，语料库可能不如我们的全面。相比之下，我们的 CDIP-ChatGLM3 基于广泛的作物和相应的疾病图像，并在全面的高质量语料库上进行了微调，不仅在疾病识别上，而且在防治处方上都取得了优异的性能。</p>
<p>Liu 等人（2025 年）也对另一个多模态模型进行了微调，以解决作物诊断问题，在疾病识别和问题解答方面都取得了很高的准确率。虽然他们在训练中使用了更多的图像，包括更多的作物和疾病（16 种作物，60 种疾病），但识别准确率却低于我们的研究，这可能是由于模态间信息融合的复杂性和训练多模态模型所需的海量数据所带来的挑战。相比之下，我们的研究在相对较小的数据集上分别对识别模型和语言模型进行了微调，然后将它们整合在一起，在识别准确率和准确反应方面都取得了优异的成绩。</p>
<p>虽然多模态模型在结合图像和文本数据方面已显示出前景，但==计算机视觉+ 微调 LLM 方法为作物病害识别和处方提供了更专业、可解释、可扩展和资源节约型的解决方案。==通过利用为每种模式定制的独立模型的优势，这种方法更适合现实世界中的农业应用，具有卓越的性能、灵活性和实用性。</p>
<h4 id="4-4-CDIP-ChatGLM3-的部署和潜在可用性评估"><a href="#4-4-CDIP-ChatGLM3-的部署和潜在可用性评估" class="headerlink" title="4.4. CDIP-ChatGLM3 的部署和潜在可用性评估"></a><strong>4.4. CDIP-ChatGLM3 的部署和潜在可用性评估</strong></h4><p>CDIP-ChatGLM3 与大多数多模态模型相比，具有最小的尺寸和较低的推理内存消耗，因此我们的模型比大多数多模态 LLM 所需的计算资源要少得多，从而提高了在消费级 GPU 上部署的可行性。具体来说，CDIP-ChatGLM3 在 FP16 精度下只需要约 13 GB 的 VRAM 进行推理，因此可以==在消费级 GPU 上运行，并为潜在的边缘或移动应用提供基于 API 的快速模型推理支持。==通过额外的量化（如 8 位或 4 位）或剪枝，该模型的内存占用可以减少到 6 GB、3 GB 或更低，从而扩大了能够承载该模型的设备范围。为了验证这一可行性，该模型被部署在一台配备了 P40 GPU 的服务器上，P40 GPU 拥有 20 GB 的 VRAM 和 32 GB 的系统内存。==CDIP-ChatGLM3 的硬件规格相对适中，低于大多数多模态 LLM 通常所需的硬件规格，在这种情况下，CDIP-ChatGLM3 表现出稳定的性能和较高的精度。==CDIP-ChatGLM3 可提供可操作的、针对特定领域的疾病预防建议，但必须不断收集和整合最终用户（如农民、农业推广人员和农学研究人员）的反馈，以便在实际农业条件下对模型进行客观、全面的评估。为了支持这一过程，我们开发了一个移动应用程序，可免费下载（<a target="_blank" rel="noopener" href="https://www.united-smartag/">https://www.united-smartag</a>. com/team/#/servicedetail），从而方便了CDIP-ChatGLM3的实际使用。有了足够的用户数据，我们将进行系统的可用性评估，以全面界定模型的优势并确定需要改进的地方。</p>
<h4 id="4-5-局限性和未来工作"><a href="#4-5-局限性和未来工作" class="headerlink" title="4.5. 局限性和未来工作"></a><strong>4.5. 局限性和未来工作</strong></h4><p>尽管在病害识别准确率和提供防控建议方面取得了可喜的成果，但仍存在一些局限性。首先，虽然我们的叶病数据集包含 48 种疾病类型，但在面对数据集之外的场景或复杂的现实世界生产环境时，==<strong>可能会出现分类错误</strong>==。其次，由于所采用的大语言模型和所获取材料的局限性，在提供农户咨询的详细信息时，偶尔仍可能会出现一些错误或缺陷，从而导致农户认为信息不足。</p>
<p>最后，尽管双模型框架在疾病识别和处方方面都实现了高准确率和高效率，并有利于单个模型的升级和持续提供服务，**==但由于视觉和语言模式的独立运行，这两种模式之间的互动并未得到充分利用。==**</p>
<p>为了解决这些问题，未来的研究将集中在三个关键领域。通过将新收集的病叶图像纳入训练过程，视觉模型将不断更新，从而增强我们的识别模型。与此同时，大语言模型应利用与疾病防治相关的最新数据集不断进行微调和迭代，确保系统始终适应不断变化的生产环境。</p>
<p><strong>==<em>为解决两种模式之间的交互问题，将实施三项关键策略。</em>==</strong></p>
<p>首先，将引入一个视觉编码器来提取图像特征，然后将图像特征与输入语言模型的文本进行整合，从而提高模型的多模态信息利用能力。</p>
<p>其次，视觉模型和语言模型的耦合训练将取代目前的两步独立训练过程，如端到端协同训练。这一策略将共同优化视觉模型和语言模型，从而提高整体性能。</p>
<p>最后，将在视觉模型中加入注意力机制，以确定关键图像信息的优先级，从而使语言模型能够有效整合图像和文本数据以生成处方，而不是只关注识别结果的关键字。</p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">lsxstart/lsxstart</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://lsxstart.github.io/archives/995740c3.html">https://lsxstart.github.io/archives/995740c3.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">lsxstart/lsxstart</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E8%AE%BA%E6%96%87/">
                                    <span class="chip bg-color">论文</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/archives/ddf56d02.html">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/2.jpg" class="responsive-img" alt="24_5_9 组会汇报">
                        
                        <span class="card-title">24_5_9 组会汇报</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2025-05-08
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E7%BB%84%E4%BC%9A%E6%B1%87%E6%8A%A5/" class="post-category">
                                    组会汇报
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E7%BB%84%E4%BC%9A/">
                        <span class="chip bg-color">组会</span>
                    </a>
                    
                    <a href="/tags/%E8%AE%BA%E6%96%87%E7%BB%8F%E9%AA%8C/">
                        <span class="chip bg-color">论文经验</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/archives/43cd3863.html">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/11.jpg" class="responsive-img" alt="动态规划_背包问题">
                        
                        <span class="card-title">动态规划_背包问题</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2025-04-16
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/acwing/" class="post-category">
                                    acwing
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">
                        <span class="chip bg-color">动态规划</span>
                    </a>
                    
                    <a href="/tags/%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/">
                        <span class="chip bg-color">背包问题</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="7394449172"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2025</span>
            
            <span id="year">2019</span>
            <a href="/about" target="_blank">lsxstart/lsxstart</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">37.3k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/lsxstart" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:startlsx@163.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>




    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=3117015561" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 3117015561" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>






</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

	
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
